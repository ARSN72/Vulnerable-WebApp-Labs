{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h2>ğŸ–¼ï¸ Your Gallery</h2>
    <p>Manage your personal posts and test IDOR vulnerabilities</p>
</div>

<div class="feed-container">
    {% for post in posts %}
        <div class="gallery-item">
            <div class="post-header">
                <strong>ğŸ‘¤ {{ post['username'] }}</strong>
                <span class="timestamp">{{ post['timestamp'] }}</span>
            </div>
            <p class="post-caption">{{ post['content'] | safe }}</p>
            {% if post['image'] %}
                <div class="post-image-container">
                    <img src="{{ url_for('static', filename='uploads/' ~ post['image']) }}" class="gallery-image">
                </div>
            {% endif %}
            <div class="gallery-actions">
                <a href="{{ url_for('edit_post', post_id=post['id']) }}" class="btn-edit">âœï¸ Edit</a>
                <a href="{{ url_for('delete_post', post_id=post['id']) }}" class="btn-delete" onclick="return confirm('Are you sure you want to delete this post?');">ğŸ—‘ï¸ Delete</a>
            </div>
        </div>
    {% endfor %}
    
    {% if not posts %}
        <div class="gallery-item">
            <div class="post-header">
                <strong>ğŸ“­ No Posts Yet</strong>
                <span class="timestamp">Empty Gallery</span>
            </div>
            <p class="post-caption">Create your first post to start building your gallery!</p>
        </div>
    {% endif %}
</div>

<div class="alert alert-warning">
    <strong>ğŸ¯ Lab Challenge:</strong> Try accessing other users' posts by changing the post ID in the URL (IDOR vulnerability)!
</div>
{% endblock %}
